name: Dependency

on:
  schedule:
    - cron: "0 0 * * *"
  push:
    paths: 
      - ".github/workflows/dependency.yml"

jobs:
  check:
    name: Check
    runs-on: ubuntu-latest

    steps:
      - name: Checkout
        uses: actions/checkout@v2.3.4
        with:
          ref: main

      - name: Set up Go
        uses: actions/setup-go@v2
        with:
          go-version: '1.17'

      - name: Set up Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: "0.88.1"
          extended: true

      - name: Run hugo mod get
        run: hugo mod get -u

      - name: Create PR
        uses: peter-evans/create-pull-request@v3
        with:
            base: main
            commit-message: "chore(deps): bump github.com/datakrama/nyerat-hugo-theme"
            title: "chore(deps): bump github.com/datakrama/nyerat-hugo-theme"
            body: |
              - Dependency updates
  
              Auto-generated by [create-pull-request][1]
  
              [1]: https://github.com/peter-evans/create-pull-request
            branch: dependency/github.com/datakrama/nyerat-hugo-theme
